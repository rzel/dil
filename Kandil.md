# Kandil #
Kandil is an XHTML and JavaScript browser application for documentation
generated by DIL.

[Ddoc](http://www.digitalmars.com/d/ddoc.html) is used as the underlying system to generate the documentation.
DIL improves upon Ddoc with unique features and introduces small differences:

## Features ##
  * The XHTML and JavaScript code are developed for the latest W3C-standards compliant browsers. Internet Explorer is not supported.<br>It's not my intention to exclude IE users, but the fact of the matter is that it costs a lot of energy and nerves to code for Microsoft's browsers.<br>Even coding only for the "good" browsers is sometimes difficult enough.<br>So, no support for IE, until it gets its act together.<br><u>Browsers that have been tested</u>: Opera 11.51, Firefox 6.02, Google Chrome 8.0.552.224, Safari 4.0.4 (531.21.10) and Konqueror 4.5.1<br>
<ul><li>Known browser issues:<br>
<ul><li>Some browsers don't support loading files using XMLHttpRequest on <i>localhost</i>.<br>Because of this, features like showing the code of a symbol and viewing a tree of all symbols in the Symbols tab will not work.<br>Workarounds:<br>
<ul><li>Chrome: Start the browser with this flag:<br><code>$ google-chrome --allow-file-access-from-files</code>
</li><li>Opera: Enable this option on the configuration page:<br>opera:config#UserPrefs|AllowFileXMLHttpRequest<br>
</li></ul></li></ul></li><li>Kandil tries to make use of the latest HTML5 features if available:<br>
<ul><li><a href='http://dev.w3.org/html5/webstorage/'>Web Storage</a> is used to store settings and to cache generated lists. Caching speeds up load times.<br>
</li><li>The <a href='http://dev.w3.org/html5/spec/history.html'>History</a> object allows you to create a new history entry and also alter the URL in the address bar. This avoids loading the navigation bar again, when browsing a project's documentation. (Note: will be implemented once major browsers support it.)<br>
</li></ul></li><li>Display the source code of a symbol when clicked.<br>
</li><li>The symbol and module list in the navigation bar can be filtered.<br>
</li><li>Every symbol in the document is targetable using a URL fragment.<br>E.g.: <a href='http://dil.googlecode.com/svn/doc/dil/dil.doc.Macro.html#Macro.this'>url/dil.doc.Macro.html#Macro.this</a>
</li><li>Superfluous indentation is removed from code embedded in comments.<br>
</li><li>Every symbol can be linked to its source location (a repository or a local HTML file.)<br>
</li><li>Protection, linkage and storage class attributes are shown in brackets.<br>
</li><li>Report warnings for undefined macros and unterminated macros (missing closing ')'.)<br>
</li><li>Every token in a code section is highlighted (customizable via kandil/style.css and data/html_map.d.)<br>
</li><li>Tokens in parameter lists and return types are highlighted (e.g. <code>void f(ref p, char[] q = "str"</code>).<br>
</li><li>Undocumented symbols can be included in the documentation using the '-i'-switch.<br>
</li><li>Unicode alphas are supported in macro, section and parameter names.<br>
</li><li>Not strictly a feature of kandil, but html2pdf.py can generate PDF documents using <a href='http://princexml.com'>PrinceXML</a>.</li></ul>

<h2>FAQ</h2>
<table><thead><th>How do I generate docs for my project?</th></thead><tbody></tbody></table>

<ol><li><a href='http://code.google.com/p/dil/wiki/Source?tm=4'>Download Dil</a> and follow the instructions in the README to compile it.<br>
</li><li>Type <code>bin/dil help ddoc</code> to get help on how to use the command.<br>
</li><li>Try this example script:<br>
<pre><code>#! /bin/bash<br>
mkdir -p myproject_doc/ # Destination.<br>
<br>
FILES=`find ~/path/to/myproject/src/ -iname '*.d'`<br>
<br>
bin/dil ddoc myproject_doc/ $FILES -v --kandil -hl<br>
# Run this script from the source dir of Dil.<br>
</code></pre></li></ol>

<table><thead><th>How can I create PDF files?</th></thead><tbody></tbody></table>

By calling this script: <a href='http://github.com/azizk/dil/blob/master/scripts/html2pdf.py'>scripts/html2pdf.py</a><br>

See: <a href='http://dl.dropbox.com/u/17101773/doc/scripts/index.html'>example scripts</a>.<br>
<br>
<table><thead><th>How can I link to other symbols?</th></thead><tbody></tbody></table>

Use the macros SYMLINK and SYMLINK2. E.g.:<br>
<ol><li><code>$(SYMLINK Macro.this, Macro Constructor)</code> would link to the symbol Macro.this in the current module.<br>
</li><li><code>$(SYMLINK2 dil.doc.Macro, Macro.this)</code> would link to Macro.this in the module dil.doc.Macro.<br>
</li><li><code>$(SYMLINK3 dil.doc.Macro, Macro.this, see how to construct a Macro)</code> is the same as SYMLINK3 but the 3rd argument changes the link text.</li></ol>

<h2>Filtering</h2>
There are 4 ways you can filter for symbols:<br>
<br>
<h3>1. Plain text</h3>
Enter letters or words as usual, and a list of symbols that match will be shown.<br>
You can also put a wildcard between two strings, e.g. "parse*ion" will match "parseExpression".<br>
<br>
<i>Example:</i>
<b>Expr</b> will match "Expression", "AndExpression", "OrExpression" etc.<br>
<br>
<h3>2. Fuzzy filtering</h3>
Entering a word followed by at least two dots will perform a search using the Levenshtein algorithm. The more dots you add the fuzzier the search will get (i.e. the Leven. distance is increased.)<br>
<br>
<i>Example:</i>
<b>getname....</b> will match "name", "getDayName", "dayNames" etc.<br>
<br>
<br>
<h3>3. FQN filtering</h3>
Use a dot to separate words in order to search for symbols by matching against their fully qualified names (FQN.)<br>
<br>
<i>Examples:</i><br>
<b>tango.math</b> will match any symbol that is located in the math package.<br>
<b>.math.</b> will show all math packages — if there are more than one — and the contained modules.<br>
<br>
<h3>4. Attribute filtering</h3>
Strings that start with a colon, ":", will search for symbols by matching against their attributes. Attributes can be symbol kinds (e.g. "variable", "function"...) and storage classes (e.g. "extern", "protected"...). You don't have to type out the complete name of the attribute.<br>
<br>
<i>Examples:</i><br>
<b>:ctor</b> will show all constructors.<br>
The string <b>:pub</b> (or ":publ", ":public") will search for symbols that have the public protection attribute.<br>
<br>
<h2>Macros</h2>
This is a list of macros which are only defined by DIL.<br>
<ul><li>DIL_SYMBOL (replaces DDOC_PSYMBOL)<br>Five Parameters:<br>
<ol><li>Symbol name (e.g. "this")<br>
</li><li>Fully qualified name excluding the module's FQN (e.g. "Macro.this", MODFQN = "dil.doc.Macro")<br>
</li><li>Symbol kind (e.g. "ctor")<br>Values: <code>template, class, interface, struct, union, alias, typedef, enum, enummem, function, variable, invariant, new, delete, unittest, ctor, dtor, sctor, sdtor</code>
</li><li>Begin line number in the code (e.g. 19)<br>
</li><li>End line number in the code (e.g. 23)<br>
</li></ol></li><li>DIL_MODFQN      (e.g. "dil.doc.Macro")<br>
</li><li>DIL_MODPATH     (e.g. "dil/doc/Macro.d")<br>
</li><li>DIL_DOCFILENAME (e.g. "dil.doc.Macro.html")<br>
</li><li>DIL_KW<br>The keyword of a D declaration (e.g. <code>class</code>, <code>alias</code>, <code>auto</code> etc.)<br>
</li><li>DIL_ATTRIBUTES<br>
</li><li>DIL_PROT<br>
</li><li>DIL_STC<br>
</li><li>DIL_LINKAGE<br>
</li><li>DIL_PARAMS<br>
</li><li>DIL_TEMPLATE_PARAMS<br>
</li><li>DIL_BASECLASS<br>
</li><li>DIL_BASECLASSES<br>
</li><li>DDOC_AUTHOR (singular of existing DDOC_AUTHORS)<br>
</li><li>DIL_SC: a semicolon after a declaration.</li></ul>

<h2>Shortcomings</h2>
In contrast to dmd, DIL doesn't highlight some keywords (e.g. null) and it<br>
doesn't emphasize symbols found in the comment text. In my experience, this<br>
is more trouble than desirable; to require explicit marking would have been better.<br>
<br>
Sometimes it is apparent that semantic information is lacking. Furthermore, <code>static if</code>-statements are not evaluated (the if-branch is always chosen by default,) since SA in DIL is not advanced enough, even for evaluating simple expressions.